<section class="bg-main-grey min-h-[90vh] mt-[10vh] p-4">
    <div #formContainer class="flex flex-col h-full items-center max-w-screen-sm gap-2 mx-auto">
        <div class="drop-shadow w-full text-center">
            <h1 class="text-5xl font-bold text-secondary drop-shadow-2xl p-10">Inicio de sesion</h1>
        </div>
        <div class="bg-main-white w-full rounded-3xl border-2 border-secondary shadow py-10 px-20">
            <form [formGroup]="loginForm" (submit)="login($event)"
                class="flex flex-col gap-7 items-center justify-center mt-10 font-medium text-font-grey">
                @if (identifier() === 'name') {
                <!--Name-->
                <div class="h-[32%] w-full flex flex-col">
                    <input
                        class="peer order-2 border-b-2 w-full border-main bg-transparent p-2 drop-shadow target:border-secondary accent-main"
                        formControlName="name" #name type="text" name="name" id="name" placeholder=" ">

                    <div
                        class="peer-placeholder-shown:translate-x-2 peer-placeholder-shown:translate-y-8 peer-placeholder-shown:text-dark-grey order-1 transition-all ease-in-out">
                        <label class="" for="name">
                            Nombre
                        </label>
                    </div>
                    <div class="order-3 overflow-hidden h-[2rem]">
                        <div
                            class="{{(hasErrors('name'))? 'translate-y-0': '-translate-y-[150%]' }} transition ease-in-out flex text-red-500">
                            <span> *{{ validator.getErrors('name', ['required', 'inUse', 'invalidCredentials'],
                                loginForm)
                                }}
                            </span>
                        </div>
                    </div>
                </div>

                }@else {
                <div class="h-[32%] w-full flex flex-col w-full">

                    <input class="border-b-2 bg-main-white w-full border-main p-2 order-2 peer" formControlName="email"
                        #email type="email" name="email" id="email" placeholder=" ">
                    <div
                        class="w-fit peer-placeholder-shown:translate-y-8 peer-placeholder-shown:translate-x-2 transition-all peer-placeholder-shown:text-dark-grey order-1">
                        <label for="email">
                            Email
                        </label>
                    </div>

                    <div class="h-[2rem] order-3 overflow-hidden">
                        <div
                            class="{{(hasErrors('email'))? 'translate-y-0': '-translate-y-[150%]'}} transition ease-in-out flex text-red-500">
                            <span> * {{
                                validator.getErrors('email', ['required', 'email', 'inUse', 'invalidCredentials'],
                                loginForm)
                                }}
                            </span>
                        </div>
                    </div>
                </div>

                }



                <div class="h-[32%] w-full flex flex-col">
                    <input class=" border-b-2 w-full bg-main-white border-main p-2 peer order-2"
                        formControlName="password" #password type="password" placeholder=" " id="password">

                    <div
                        class="w-fit peer-placeholder-shown:translate-y-8 peer-placeholder-shown:translate-x-2 peer-placeholder-shown:text-dark-grey order-1 transition-all">
                        <label for="password">
                            Contraseña
                        </label>
                    </div>

                    <div class="overflow-hidden h-[3rem]  order-3">
                        <div
                            class="{{(hasErrors('password'))? '': '-translate-y-[200%]'}} transition ease-in-out flex text-red-500">
                            <span> *{{
                                validator.getErrors('password', ['required', 'pattern', 'minlength',
                                'invalidCredentials'],
                                loginForm)
                                }}</span>
                        </div>
                    </div>
                </div>
                <div class="flex flex-col w-full">
                    <div class="h-[32%] w-full flex justify-start gap-4 items-center">
                        <label for="remember_me">Recuerdame</label>
                        <input class="border-secondary accent-secondary size-5" type="checkbox" id="remember_me"
                            name="remember_me">

                    </div>
                    <div class="">
                        <button class="flex items-center gap-2" (click)="changeIdentifier()" type="button">
                            <span class="material-icons text-secondary transition ease-in-out duration-200" #arrowIcon>cached</span>
                            Iniciar sesion con {{(identifier() === 'name'? 'email' : 'nombre de usuario')}}
                        </button>
                    </div>
                </div>

                <div class="flex flex-col items-center w-full gap-4">
                    <div class="font-medium ">
                        <span>¿No tienes cuenta?
                            <a class="text-secondary" routerLink="/register">registrate
                            </a>
                            aqui
                        </span>
                    </div>

                    <button
                        class="{{loginForm.invalid ? 'cursor-not-allowed hover:bg-transparent  hover:text-secondary' : 'hover:scale-110 cursor-pointer'}} py-1 w-24 px-2 rounded-lg border-[3px] border-secondary text-secondary font-bold bg-transparent hover:bg-secondary hover:text-main-white transition flex items-center justify-center"
                        [disabled]="loginForm.invalid" type="submit">
                        <div #loadingAnimation class="animate-spin hidden justify-center items-center">
                            <img class="aspect-square size-5" src="assets/img/loading_wheel.png" alt="loading">
                        </div>
                        <span #submitButton class="transition">Login</span>
                    </button>


                </div>

            </form>
        </div>
    </div>
</section>
